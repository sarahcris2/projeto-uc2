{% extends 'global/base.html' %}


{% block main %}
{% load static %}
  {% if validlink %}
  <div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="card shadow-lg p-4" style="max-width: 450px; background-color: #111; color: #fff; border: none;">
      <section class="card-body">
        <div class="logo">
          <img src="{% static 'global/img/Logo_HDG.png' %}" class="img-fluid mb-3 w-50 h-50" alt="Logo">
        </div>
        <h4 class="text-center mb-4">Redefinir Senha</h4>
        <p class="text-center mb-4">Por favor, insira e confirme sua nova senha.</p>
  
        <form action="" method="post" novalidate>
          {% csrf_token %}
  
          {% if form.new_password1.errors %}
            <div class="alert alert-danger">
              {{ form.new_password1.errors }}
            </div>
          {% endif %}
  
          <div class="mb-3">
            <label for="id_new_password1" class="form-label">Nova Senha:</label>
            <input type="password" class="form-control" name="new_password1" id="id_new_password1"
                   placeholder="Digite a nova senha" required
                   style="background-color: #222; color: #fff; border: 1px solid #444;">
          </div>
  
          {% if form.new_password2.errors %}
            <div class="alert alert-danger">
              {{ form.new_password2.errors }}
            </div>
          {% endif %}
  
          <div class="mb-3">
            <label for="id_new_password2" class="form-label">Confirme a Senha:</label>
            <input type="password" class="form-control" name="new_password2" id="id_new_password2"
                   placeholder="Confirme a nova senha" required
                   style="background-color: #222; color: #fff; border: 1px solid #444;">
          </div>
  
          <div class="d-grid">
            <button type="submit" class="btn btn-danger btn-lg">
              Mudar minha senha
            </button>
          </div>
        </form>
      </section>
    </div>
  </div>
  
  {% else %}
  <div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="card shadow-lg p-4" style="max-width: 450px; background-color: #111; color: #fff; border: none;">
      <section class="card-body text-center">
        <h1 class="text-danger mb-4">Falha na redefinição de senha</h1>
        <p>
          O link de redefinição de senha era inválido, possivelmente porque já foi usado.  
          Solicite uma nova redefinição de senha.
        </p>
      </section>
    </div>
  </div>
  
  {% endif %}
{% endblock %}